// This JavaScript is executed when the #create controller method finishes

// compose new list item
<% annotationText = render :partial => "annotations/single_annotation_table_row", :locals => { :annotation => @annotation } %>
var response = "<%= escape_javascript(annotationText)%>";
$("#annotations-header").fadeIn("slow");
$(response).hide().prependTo("#annotation-table").fadeIn("slow");

// re-enable new tooltips
$(".tooltip").tooltip();
$("a[rel=tooltip]").tooltip();

// first clear the editing layer, then load the newly created annotation
$("#viewer").empty();
initOpenLayers();

// slide down the panel
$("#modal-annotation").modal('hide');

// confirmation / error dialog, disabled
// $("#modal-annotation-confirm").modal();
//  $("#modal-annotation-confirm-close").click(function(){
//    $("#modal-annotation-confirm").modal('hide');
// });

//reset the tags
window.tagging_view.reset();